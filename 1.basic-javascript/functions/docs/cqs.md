# Теория: Разделение команд и запросов

Command-Query Separation(CQS) - принцип програмированния, согласно которому каждая функция является либо командой,
которая выполняет действие(action), либо запросом (query), который извлекает данные, но не тем и другим одновременно

## Команда

```js
// return true or false

save(user)
```

Согласно `CQS` ф-ция `save()` является командой. Единственное, что она может делать - возвращать(опять же согласно
принципу), успешность своего выполнения - `true` или `false`
Возврат возвращание этой функцией любых осмысленных данных рассматривается как нарушение `CQS`.
Однако, существуют ситуации в которых невозможно соблюсти этот принцип.

Команды по определению выполняют недетерменированный код с побочными эффектами, потому что повторный вызов команды
приводит либо к ошибке, либо к повторному выполнению действия

## Запрос

```js
isAdmin(user)
```

Функция `isAdmin()` - предикат, типичный запрос.
Такая функция не может изменять состояние системы: например, поменять дату проверки на администратора внутри
пользователя или сделать пользователя администратором. Это протеворечит `CQS` и здравому смыслу.

В отличие от `save()` - результат выполнения ф-ции это ответ на заданный вопрос - является ли пользователь
администратором?

Отсутствие изменения в запросах — очень важный принцип, который нужно соблюдать всегда.

Как поступать в случаях, когда невозможно отделить команду от запроса?
Например:

```js
let username = getName()
if (!username) {
  // Если имени нет, то генерируем и запоминаем
  username = generateName()
  setName(username)
}
```

Если убрать эту логику внутрь функции, то как она должна называться? Правильный подход - именовать функцию как команду -
`setUserName`, `setUserNameIfEmpty`, но не `getUserName`
