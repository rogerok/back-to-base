# Область видимости и замыкания

## Области видимости

С точки зрения окружения, программы делятся на две области видимости:

- Глобальную(внешнюю)
- Локальную(внутренюю)

В глобальной области видимости находится всё, что мы создаем снаружи функций, инструкций `if`, циклов и других блоков
кода

Любой блок кода между фигурными скобками имеет локальную область видимости
Например:

```js
let a = 0

if (a === 0) {
  const local = 10
}

console.log(local) // => ReferenceError: local is not defined
```

## Лексическая область видимости

Под лексической областью видимости можно понимать механизм поиска значений: смотрим в текущей области, если нет - идем
на уровень выше.
Слово "лексический" означает, что видимость задается исключительно текстом программы.

У каждого блока кода в JS, есть скрытый объект, называемый лексическим окружением `LexicalEnvironment`

Объект состоит из двух частей

1) `Environment Record` - объект, в котором как свойства хранятся все локальные переменные, `this` и другая информация
2) Ссылка на _внешнее лексическое окружение_

**Переменная - просто свойство специального внутреннего объекта: `Environment Record`. Получить или изменить переменную
означает получить или изменить свойство этого объекта**

```js
let a = 7
let b = 10

const multiplier = () => {
  let a = 5
  return a * b
}

multiplier() // 50
```

Значение `a` задано внутри, а `b` - нет.
Пытаясь решить умножение, `a * b`, JS ищет эти значения. Он начинает искать локально и выходит наружу по одной области
видимости за шаг, до тех пор пока JS:

* Не найдет то, что нужно
* Не увидит, что это невозможно

## Замыкание

Замыкание - сочетание функции и окружения, где она была заявлена.
Другими словами - функция, которая использует внешние штуки внутри себя.

